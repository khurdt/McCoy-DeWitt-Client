"use strict";(self.webpackChunkmccoy_dewitt_client=self.webpackChunkmccoy_dewitt_client||[]).push([[379],{379:function(e,t,i){i.r(t),i.d(t,{default:function(){return q}});var n=i(1413),s=i(885),o=i(2791),r=i(2576),a=i(9140),l=i(8322),c=i(5736),d=i(9743),u=i(2677),p=i(7798),x=i(3360),m=i(8213),h=i(7689),j=i(4569),f=i.n(j),g=i(2428),y=i(2398),Z=i(9907),v=i(7702),C=i(1961),N=i(4543),b=i(2109),S=i(6973),w=i(4401),k=i(5443),T=i(9083),I=i(3600),z=i(8227),W=i(9762),F=i(5671),L=i(3144),_=i(136),B=i(4104),U=i(9053),O=i(6666),D=i.n(O),A=i(184),P=function(e){(0,_.Z)(i,e);var t=(0,B.Z)(i);function i(){return(0,F.Z)(this,i),t.apply(this,arguments)}return(0,L.Z)(i,[{key:"myWidget",value:function(){var e=this,t=D()(),i=window.cloudinary.createUploadWidget({prepareUploadParams:function(e,i){e({public_id:t})},cloudName:"dcrbfhcxx",uploadPreset:"xeyoxyah",sources:["local","url"],folder:this.props.project_id,maxImageWidth:2e3},(function(t,i){!t&&i&&"success"===i.event&&(console.log("Done! Here is the image info: ",i.info),e.props.updateFiles(i.info.public_id),console.log(i),document.getElementById("uploadedimage").setAttribute("src",i.info.secure_url))}));i.open()}},{key:"render",value:function(){var e=this;return(0,A.jsx)(p.Z,{placement:"right",delay:{show:250,hide:400},overlay:this.props.renderTooltip("Add Images"),children:(0,A.jsx)(U.Z,{onClick:function(){return e.myWidget()},style:{color:"green",cursor:"pointer",marginLeft:"20px"}})})}}]),i}(o.Component),E=P,G=i(9136);function q(e){var t=(0,h.TH)(),i=e.primaryColor,j=e.setSnackBarInfo,F=e.secondaryColor,L=e.admin,_=(0,o.useState)(t.state.selectedProject),B=(0,s.Z)(_,2),U=B[0],O=B[1],D=(0,o.useState)(t.state.selectedService),P=(0,s.Z)(D,2),q=P[0],H=(P[1],(0,o.useState)(!1)),K=(0,s.Z)(H,2),R=K[0],Y=K[1],J=(0,o.useState)(!1),M=(0,s.Z)(J,2),Q=M[0],V=M[1],X=(0,o.useState)(!1),$=(0,s.Z)(X,2),ee=$[0],te=$[1],ie=(0,o.useState)({}),ne=(0,s.Z)(ie,2),se=ne[0],oe=ne[1],re=(0,o.useState)({}),ae=(0,s.Z)(re,2),le=ae[0],ce=ae[1],de=function(){return""!==U.insuranceClaim.dateOfDamage?U.insuranceClaim.dateOfDamage.slice(0,10):""},ue=function(){return""!==U.insuranceClaim.dateOfInspection?U.insuranceClaim.dateOfInspection.slice(0,10):""};(0,o.useEffect)((function(){window.scrollTo(0,0),xe()}),[]);var pe=function(){var e=U.description,t=U.location,i=!0,n={};return e&&""!==e&&" "!==e||(n.description="*required",i=!1),t||(n.location="*required",i=!1),ce(n),i},xe=function(){var e=localStorage.getItem("token");f().get("https://polar-tor-24509.herokuapp.com/oneProject/".concat(U._id),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){O(e.data),Y(!1)})).catch((function(e){console.log(e)}))},me=function(e){return(0,A.jsx)(r.Z,{id:"button-tooltip",children:e})};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{style:{position:"relative"},children:[(0,A.jsx)("div",{className:"project-background"}),(0,A.jsx)(a.Z,{className:"projectTitleCard projectTitleCard m-auto",style:{borderColor:i},children:(0,A.jsx)("div",{className:"projectTitleCard-body",children:(0,A.jsxs)(a.Z.Title,{className:"m-auto",style:{color:"white"},children:[U.service," Project"]})})}),(0,A.jsx)(m.Ee,{publicId:q.image,className:"projectImage projectImage"})]}),(0,A.jsxs)("div",{className:"mt-4 mb-5",children:[(0,A.jsxs)(a.Z,{className:"projectIntro projectIntro ml-auto",children:[R?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(Z.Z,{onClick:function(){return function(){var e=localStorage.getItem("token"),t={description:U.description,location:U.location,insuranceClaim:U.insuranceClaim,status:U.status,users:U.users};pe()&&(j({show:"true",message:"Updating Project",loading:!0}),f().put("https://polar-tor-24509.herokuapp.com/projects/".concat(U._id),t,{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){Y(!1),xe(),j({show:"true",message:"Update Successful",loading:!1})})).catch((function(e){console.log(e),j({show:"true",message:"Update Failed",loading:!1})})))}()},className:"projectEditButton",style:{color:"green"}}),(0,A.jsx)(v.Z,{className:"projectCancelButton",onClick:function(){xe()}})]}):(0,A.jsx)("div",{className:"projectEditButton",children:(0,A.jsx)(g.Z,{as:y.Z,onClick:function(){return Y(!0)},style:{cursor:"pointer",width:"25px",height:"25px",color:F},id:"dropdown-basic"})}),(0,A.jsxs)("div",{style:{marginRight:"45px"},children:[(0,A.jsxs)(a.Z.Title,{className:"project-overview",style:{fontSize:"21px",padding:"10px"},children:["Overview:",R?(0,A.jsx)(l.Z,{style:{width:"auto",maxWidth:"350px"},children:(0,A.jsx)(l.Z.Group,{className:"m-1",children:(0,A.jsxs)("div",{style:{position:"relative"},children:[(0,A.jsx)(l.Z.Control,{type:"text",placeholder:"Overview",value:U.description,onChange:function(e){O((0,n.Z)((0,n.Z)({},U),{},{description:e.target.value})),le.description&&pe()}}),le.description&&(0,A.jsx)(W.Z,{message:le.description,type:"error",profile:!0})]})})}):(0,A.jsx)("div",{style:{fontSize:"15px",marginLeft:"30px",paddingTop:"5px"},children:U.description})]}),(0,A.jsxs)("div",{style:{width:"fit-content",padding:"10px"},children:[(0,A.jsxs)(a.Z.Title,{className:"status",children:["Status: ",(0,A.jsx)(c.Z,{className:"p-2",children:U.status.title})]}),(0,A.jsx)(a.Z.Title,{style:{fontSize:"15px",fontWeight:"200",marginLeft:"30px"},children:U.status.description})]})]})]}),(0,A.jsx)(a.Z,{style:(window.innerWidth,{border:"none"}),children:(0,A.jsxs)(d.Z,{className:"justify-content-center m-auto align-items-center",style:{maxWidth:"1000px"},children:[(0,A.jsxs)(u.Z,{className:"secondaryInfo-item",children:[(0,A.jsx)("label",{className:"secondaryInfo-label",children:(0,A.jsxs)(a.Z.Title,{style:{fontSize:"20px"},children:[(0,A.jsx)(C.Z,{className:"icons"}),"Project Key:"]})}),(0,A.jsxs)(a.Z.Title,{style:{fontSize:"17px",marginLeft:"50px",WebkitTextSecurity:"disc"},children:[U._id,(0,A.jsx)(p.Z,{placement:"bottom",delay:{show:250,hide:400},overlay:navigator.clipboard.read===U._id?me("Copy"):me("Copied"),children:(0,A.jsx)(N.Z,{style:{marginLeft:"10px",marginBottom:"5px",width:"16px",height:"16px",cursor:"pointer"},onClick:function(){var e;e=U._id,navigator.clipboard.writeText(e)}})})]})]}),(0,A.jsxs)(u.Z,{className:"secondaryInfo-item",children:[(0,A.jsx)("label",{className:"secondaryInfo-label",children:(0,A.jsxs)(a.Z.Title,{style:{fontSize:"20px"},children:[(0,A.jsx)(b.Z,{className:"icons"}),"Location:"]})}),R?(0,A.jsx)(l.Z,{style:{width:"auto",maxWidth:"350px"},children:(0,A.jsx)(l.Z.Group,{className:"m-1",children:(0,A.jsx)("div",{style:{position:"relative"},children:(0,A.jsx)(l.Z.Control,{type:"text",placeholder:"Overview",value:U.location,onChange:function(e){O((0,n.Z)((0,n.Z)({},U),{},{location:e.target.value}))}})})})}):(0,A.jsx)(a.Z.Title,{style:{fontSize:"17px",marginLeft:"50px"},children:U.location})]}),(0,A.jsxs)(u.Z,{className:"secondaryInfo-item",children:[(0,A.jsx)("label",{className:"secondaryInfo-label",children:(0,A.jsxs)(a.Z.Title,{style:{fontSize:"20px"},children:[(0,A.jsx)(S.Z,{className:"icons"}),"Users Involved:"]})}),(0,A.jsx)(d.Z,{className:"justify-content-center align-items-center",style:{fontSize:"17px",marginLeft:"50px"},children:U.users.map((function(e,t,i){return e===L?(0,A.jsx)("div",{}):(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(u.Z,{className:"m-1",children:(0,A.jsx)(a.Z.Title,{children:(0,A.jsx)(c.Z,{className:"p-2",bg:"secondary",children:e})})})})}))})]}),(0,A.jsxs)("div",{className:"secondaryInfo-item",children:[(0,A.jsx)("label",{className:"secondaryInfo-label",style:{display:"flex"},children:(0,A.jsxs)(a.Z.Title,{style:{fontSize:"20px"},children:[(0,A.jsx)(w.Z,{className:"icons"}),"Insurance Claim:"]})}),R&&(0,A.jsxs)("div",{style:{display:"flex",margin:"5px"},children:[(0,A.jsx)("div",{style:{fontSize:"15px",margin:"auto",textAlign:"center"},children:"Still using?"}),(0,A.jsx)(G.Z,{primaryColor:i,onClickFunction:function(){O((0,n.Z)((0,n.Z)({},U),{},{insuranceClaim:(0,n.Z)((0,n.Z)({},U.insuranceClaim),{},{using:!0})}))},currentChoice:se,setCurrentChoice:oe,text:"Yes",small:!0}),(0,A.jsx)(G.Z,{primaryColor:i,onClickFunction:function(){O((0,n.Z)((0,n.Z)({},U),{},{insuranceClaim:(0,n.Z)((0,n.Z)({},U.insuranceClaim),{},{using:!1})}))},currentChoice:se,setCurrentChoice:oe,text:"No",small:!0})]}),!0===U.insuranceClaim.using?(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)("ul",{children:[(0,A.jsx)("li",{children:(0,A.jsx)(a.Z.Title,{style:{fontSize:"16px",marginLeft:"20px"},children:"Claim Number:"})}),(0,A.jsx)("div",{children:R?(0,A.jsx)(l.Z,{style:{width:"auto",maxWidth:"350px"},children:(0,A.jsx)(l.Z.Group,{className:"m-1",children:(0,A.jsxs)("div",{style:{position:"relative"},children:[(0,A.jsx)(l.Z.Control,{type:"text",placeholder:"Claim Number",value:U.insuranceClaim.claimNumber,style:ee?{WebkitTextSecurity:"none"}:{WebkitTextSecurity:"disc"},onChange:function(e){O((0,n.Z)((0,n.Z)({},U),{},{insuranceClaim:(0,n.Z)((0,n.Z)({},U.insuranceClaim),{},{claimNumber:e.target.value})}))}}),(0,A.jsx)("div",{style:{position:"absolute",top:"10px",right:"20px"},children:ee?(0,A.jsx)(k.Z,{className:"icons",style:{cursor:"pointer"},onClick:function(){return te(!1)}}):(0,A.jsx)(T.Z,{className:"icons",style:{cursor:"pointer"},onClick:function(){return te(!0)}})})]})})}):(0,A.jsxs)("div",{style:{display:"flex"},children:[(0,A.jsx)(a.Z.Title,{className:"claimNumber",style:ee?{WebkitTextSecurity:"none",fontSize:"16px"}:{WebkitTextSecurity:"disc"},children:U.insuranceClaim.claimNumber}),ee?(0,A.jsx)(k.Z,{className:"icons",style:{cursor:"pointer"},onClick:function(){return te(!1)}}):(0,A.jsx)(T.Z,{className:"icons",style:{cursor:"pointer"},onClick:function(){return te(!0)}})]})}),(0,A.jsx)("li",{children:(0,A.jsx)(a.Z.Title,{style:{fontSize:"16px",marginLeft:"20px"},children:"Date of damage done:"})}),R?(0,A.jsx)(l.Z,{style:{width:"auto",maxWidth:"350px"},children:(0,A.jsx)(l.Z.Group,{className:"m-1",children:(0,A.jsx)("div",{style:{position:"relative"},children:(0,A.jsx)(l.Z.Control,{type:"date",value:de(),onChange:function(e){O((0,n.Z)((0,n.Z)({},U),{},{insuranceClaim:(0,n.Z)((0,n.Z)({},U.insuranceClaim),{},{dateOfDamage:e.target.value})}))}})})})}):(0,A.jsx)(a.Z.Title,{style:{fontSize:"16px",marginLeft:"50px"},children:de()}),(0,A.jsx)("li",{children:(0,A.jsx)(a.Z.Title,{style:{fontSize:"16px",marginLeft:"20px"},children:"Date of inspection:"})}),R?(0,A.jsx)(l.Z,{style:{width:"auto",maxWidth:"350px"},children:(0,A.jsx)(l.Z.Group,{className:"m-1",children:(0,A.jsx)("div",{style:{position:"relative"},children:(0,A.jsx)(l.Z.Control,{type:"date",value:ue(),onChange:function(e){O((0,n.Z)((0,n.Z)({},U),{},{insuranceClaim:(0,n.Z)((0,n.Z)({},U.insuranceClaim),{},{dateOfInspection:e.target.value})}))}})})})}):(0,A.jsx)(a.Z.Title,{style:{fontSize:"16px",marginLeft:"50px"},children:ue()})]})}):(0,A.jsx)(a.Z.Title,{style:{fontSize:"17px",marginLeft:"50px"},children:"None"})]}),(0,A.jsx)("div",{style:{margin:"10px"},children:(0,A.jsxs)("label",{style:{display:"flex",justifyContent:"center",borderBottom:"1px solid ".concat(i),maxWidth:"350px",margin:"auto"},children:[(0,A.jsxs)(a.Z.Title,{style:{fontSize:"20px"},children:[(0,A.jsx)(I.Z,{className:"icons"}),"Images:"]}),Q?(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(Z.Z,{onClick:function(){V(!1)},style:{color:"green",cursor:"pointer",marginLeft:"17px",marginTop:"3px"}})}):(0,A.jsxs)("div",{style:{display:"flex",paddingTop:"2px"},children:[(0,A.jsx)(E,{renderTooltip:me,updateFiles:function(e){var t=localStorage.getItem("token");j({message:"Updating Files",loading:!0,show:"true"}),f().post("https://polar-tor-24509.herokuapp.com/files/".concat(e,"/projects/").concat(U._id),{jwt:"token"},{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){console.log(e),j({message:"Update Successful",loading:!1,show:"true"}),xe()})).catch((function(e){j({message:"Failed to Update",loading:!1,show:"true"}),console.log(e)}))},project:U}),(0,A.jsx)(p.Z,{placement:"right",delay:{show:250,hide:400},overlay:me("Delete Images"),children:(0,A.jsx)(z.Z,{onClick:function(){return V(!0)},style:{color:"red",cursor:"pointer",marginLeft:"80px"}})})]})]})})]})}),(0,A.jsx)(d.Z,{className:"justify-content-center",children:U.files.map((function(e){return(0,A.jsxs)(u.Z,{style:{display:"flex",flexDirection:"column",marginBottom:"10px"},children:[(0,A.jsx)(m.Ee,{publicId:e.name,style:{width:"200px",height:"200px",objectFit:"cover",margin:"auto"}}),Q&&(0,A.jsx)(x.Z,{variant:"danger",style:{width:"200px",margin:"auto"},onClick:function(){!function(e){var t=localStorage.getItem("token");j({message:"Updating Files",loading:!0,show:"true"}),f().delete("https://polar-tor-24509.herokuapp.com/files/".concat(e,"/projects/").concat(U._id),{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){console.log(e),j({message:"Files Updated",loading:!1,show:"true"}),xe()})).catch((function(e){j({message:"Failed to Update",loading:!1,show:"true"}),console.log(e)}))}(e.name)},children:"delete"})]})}))})]})]})}}}]);
//# sourceMappingURL=379.03971e18.chunk.js.map